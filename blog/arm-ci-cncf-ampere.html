<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="author" content="OpenFaaS Ltd"/><meta name="twitter:card" content="summary_large_image"/><title>Announcing managed Arm CI for CNCF projects</title><meta name="description" content="Ampere Computing and The Cloud Native Computing Foundation are sponsoring a pilot of actuated&#x27;s managed Arm CI for CNCF projects."/><meta property="twitter:title" content="Announcing managed Arm CI for CNCF projects"/><meta property="twitter:description" content="Ampere Computing and The Cloud Native Computing Foundation are sponsoring a pilot of actuated&#x27;s managed Arm CI for CNCF projects."/><meta property="og:title" content="Announcing managed Arm CI for CNCF projects"/><meta property="og:description" content="Ampere Computing and The Cloud Native Computing Foundation are sponsoring a pilot of actuated&#x27;s managed Arm CI for CNCF projects."/><meta name="twitter:image:src" content="https://actuated.dev/images/2023-10-cncf/background.png"/><meta property="og:image" content="https://actuated.dev/images/2023-10-cncf/background.png"/><meta name="next-head-count" content="13"/><meta charSet="utf-8"/><link rel="icon" type="image/png" href="/images/actuated.png"/><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"/><link rel="manifest" href="/manifest.json"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M5YNDNX7VT"></script><script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-M5YNDNX7VT');
          </script><link rel="apple-touch-icon" href="/images/actuated.png"/><link rel="preload" href="/_next/static/css/931f0fc3815fa31d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/931f0fc3815fa31d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-34e2100d07ae5757.js" defer=""></script><script src="/_next/static/chunks/pages/_app-380bfc772a8344bc.js" defer=""></script><script src="/_next/static/chunks/552-542f150c917a7625.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-109b0d2eddac75b5.js" defer=""></script><script src="/_next/static/TZlPezVIkryNxUuitvxw1/_buildManifest.js" defer=""></script><script src="/_next/static/TZlPezVIkryNxUuitvxw1/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="bg-white"><header><div class="relative bg-white" data-headlessui-state=""><div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-6 sm:px-6 md:justify-start md:space-x-10 lg:px-8"><div class="flex justify-start lg:w-0 lg:flex-1"><a href="/"><span class="sr-only">Actuated</span><img class="h-8 w-auto sm:h-10" src="/images/actuated.png" alt="Actuated logo"/></a></div><div class="-my-2 -mr-2 md:hidden"><button class="inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" type="button" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Open menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div><nav class="hidden space-x-10 md:flex"><div class="relative" data-headlessui-state=""><button class="text-gray-500 group inline-flex items-center rounded-md bg-white text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" type="button" aria-expanded="false" data-headlessui-state=""><span>Solutions</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path></svg></button></div><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/blog">Blog</a><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="https://actuated.dev/blog/blazing-fast-ci-with-microvms">Announcement</a><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/pricing">Pricing</a><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="https://docs.actuated.dev/">Docs</a></nav><div class="hidden items-center justify-end md:flex md:flex-1 lg:w-0"><a href="https://dashboard.actuated.dev" class="whitespace-nowrap text-base font-medium text-gray-500 hover:text-gray-900">Sign in</a><a href="/pricing" class="ml-8 inline-flex items-center justify-center whitespace-nowrap rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700">Sign-up</a></div></div></div></header><main><div class="container mx-auto max-w-4xl bg-white mt-4 px-4 sm:px-6"><h1 id="post_title" class="text-3xl mb-3 leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 text-center">Announcing managed Arm CI for CNCF projects</h1></div><div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl"><div class="border-b border-gray-200 py-4 flex items-center text-gray-500 mx-auto"><div><img class="h-10 w-10 rounded-full" src="/images/alex.jpg" alt=""/></div><div class="ml-3"><p id="post_author" class="text-sm leading-5 font-medium text-gray-900"></p><div class="flex text-sm leading-5 text-gray-500"><time dateTime="2023-10-25" id="post_date">October 25, 2023</time><span class="mx-1"></span></div></div></div><div class="mt-6 prose sm:prose-lg max-w-none"><p id="post_description" class="mb-4">Ampere Computing and The Cloud Native Computing Foundation are sponsoring a pilot of actuated&#x27;s managed Arm CI for CNCF projects.</p></div><div id="post_content" class="mt-6 prose sm:prose-lg max-w-none"><p>In this post, we'll cover why <a href="https://amperecomputing.com/">Ampere Computing</a> and <a href="https://www.cncf.io/">The Cloud Native Computing Foundation (CNCF)</a> are sponsoring a pilot of actuated for open source projects, how you can get involved.</p>
<p>We'll also give you a quick one year recap on actuated, if you haven't checked in with us for a while.</p>
<h2 id="managed-arm-ci-for-cncf-projects">Managed Arm CI for CNCF projects</h2>
<p>At KubeCon EU, I spoke to <a href="https://www.linkedin.com/in/caniszczyk/">Chris Aniszczyk</a>, CTO at the <a href="https://cncf.io">Cloud Native Computing Foundation (CNCF)</a>, and told him about some of the results we'd been seeing with actuated customers, including Fluent Bit, which is a CNCF project. Chris told me that many teams were either putting off Arm support all together, were suffering with the slow builds that come from using QEMU, or were managing their own infrastructure which was underutilized.</p>
<p><a href="https://deploy.equinix.com/">Equinix</a> provides a generous amount of credits to the CNCF under <a href="https://github.com/cncf/cluster">CNCF Community Infrastructure Lab (CIL)</a>, including access to powerful Ampere Q80 Arm servers (<a href="https://deploy.equinix.com/product/servers/c3-large-arm64/">c3.large.arm64</a>), that may at times be required by Equinix customers for their own Arm workloads.</p>
<p>You can find out more about <a href="https://amperecomputing.com/products/processors">Ampere's Altra platform here</a>, which is being branded as a "Cloud Native" CPU, due to its low power consumption, high core count, and ubiquitous availability across Google Cloud, Oracle Cloud Platform, Azure, Equinix Metal, Hetzner Cloud, and Alibaba Cloud.</p>
<p>As you can imagine, over time, different projects have deployed 1-3 of their own runner servers, each with 256GB of RAM and 80 Cores, which remain idle most of the time, and are not available to other projects or Equinix customers when they may need them suddenly. So, if actuated can reduce this number, whilst also improving the experience for maintainers, then that's a win-win.</p>
<p>Around the same time as speaking to Chris, Ampere reached out and asked how they could help secure actuated for a number of CNCF projects.</p>
<p>Together, Ampere and the CNCF are now sponsoring an initial 1-year pilot of managed Arm CI provided by actuated, for CNCF projects, with the view to expand it, if the pilot is a success.</p>
<p><a href="https://www.linkedin.com/in/edwardvielmetti/">Ed Vielmetti</a>, Developer Partner Manager at Equinix said:</p>
<blockquote>
<p>I'm really happy to see this all come together. If all goes according to plan, we'll have better runner isolation, faster builds, and a smaller overall machine footprint.</p>
</blockquote>
<p><a href="https://www.linkedin.com/in/dneary/">Dave Neary</a>, Director of Developer Relations at Ampere Computing added:</p>
<blockquote>
<p>Actuated offers a faster, more secure way for projects to run 64-bit Arm builds, and will also more efficiently use the Ampere Altra-based servers being used by the projects.</p>
<p>We're happy to support CNCF projects running their CI on Ampere Computing's Cloud Native Processors, hosted by Equinix.</p>
</blockquote>
<h2 id="one-year-recap-on-actuated">One year recap on actuated</h2>
<p>In case you are hearing about actuated for the first time, I wanted to give you a quick one year recap.</p>
<p>Just over 12 months ago, we <a href="https://actuated.dev/blog/blazing-fast-ci-with-microvms">announced the work we'd been doing with actuated</a> to improve self-hosted runner security and management. We were pleasantly surprised with the amount of people that responded who'd had a common experience with slow builds, running out of RAM, limited disk space, and a lack of an easy and secure way to run self-hosted runners.</p>
<p>Fast forward to today, and we have run over 140,000 individual Firecracker VMs for customers on their own hardware. Rather than the fully managed service that GitHub offers, we believe that you should be able to bring your own hardware, and pay a flat-rate fee for the service, rather than being charged per-minute.</p>
<p>The CNCF project brings about 64-bit Arm support, but we see a good mix of <code>x86_64</code> and Arm builds from customers, with both closed and open-source repositories being used.</p>
<p>The main benefits are having access to bigger, faster and more specialist hardware.</p>
<ul>
<li>For <code>x86_64</code> builds, we see about a 3x speed-up vs. using GitHub's hosted runners, in addition to being able to add more RAM and disk space to builds.</li>
<li>For Arm64, we see builds which take several hours or which fail to complete within a 6 hour window using QEMU, go down to 3-5 minutes.</li>
</ul>
<p>Vendors and consumers are becoming increasingly aware of the importance of the supply chain, GitHub's self-hosted runner is <a href="https://actuated.dev/blog/is-the-self-hosted-runner-safe-github-actions">not recommended for open source repos</a>. Why? Due to the way side-effects can be left over between builds. Actuated uses a fresh, immutable, Firecracker VM for every build which boots up in less than 1 second and is destroyed after the build completes, which removes this risk.</p>
<p>If you're wanting to know more about why we think microVMs are the only tool that makes sense for secure CI, then I'd recommend my talk from Cloud Native Rejekts earlier in the year: <a href="https://www.youtube.com/watch?v=pTQ_jVYhAoc">Face off: VMs vs. Containers vs Firecracker</a>.</p>
<h2 id="what-are-maintainers-saying">What are maintainers saying?</h2>
<p><a href="https://www.linkedin.com/in/ellmh">Ellie Huxtable</a> is the maintainer of <a href="https://atuin.sh/">Atuin</a>, a popular open-source tool to sync, search and backup shell history. Her Rust build for the CLI took 90 minutes with QEMU, but was reduced to just 3 minutes with actuated, and a native Arm server.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Thanks to <a href="https://twitter.com/selfactuated?ref_src=twsrc%5Etfw">@selfactuated</a>, Atuin now has very speedy ARM docker builds in our GitHub actions! Thank you <a href="https://twitter.com/alexellisuk?ref_src=twsrc%5Etfw">@alexellisuk</a> üôè<br><br>Docker builds on QEMU: nearly 90 mins<br>Docker builds on ARM with Actuated: ~3 mins</p>&mdash; Ellie Huxtable (@ellie_huxtable) <a href="https://twitter.com/ellie_huxtable/status/1715261549172936776?ref_src=twsrc%5Etfw">October 20, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>For Fluent Bit, one of their Arm builds was taking over 6 hours, which meant it always failed with a timed-out on a hosted runner. <a href="https://www.linkedin.com/in/patrickjkstephens/?originalSubdomain=uk">Patrick Stephens</a>, Tech Lead of Infrastructure at Calyptia reached out to work with us. We got the time down to 5 minutes by changing <code>runs-on: ubuntu-latest</code> to <code>runs-on: actuated-arm64-4cpu-16gb</code>, and if you need more or less RAM/CPU, you can tune those numbers as you wish.</p>
<p>Patrick shares about the experience on the Calyptia blog, including the benefits to their <code>x86_64</code> builds for the commercial Calyptia product: <a href="https://calyptia.com/blog/scaling-builds-with-actuated">Scaling ARM builds with Actuated</a>.</p>
<p>A number of CNCF maintainers and community leaders such as <a href="https://www.linkedin.com/in/davanum/">Davanum Srinivas (Dims)</a>, Principal Engineer at AWS have come forward with project suggestions, and we're starting to work through them, with the first two being Fluent Bit and etcd.</p>
<p><a href="https://fluentbit.io/">Fluent Bit</a> describes itself as:</p>
<blockquote>
<p>..a super fast, lightweight, and highly scalable logging and metrics processor and forwarder. It is the preferred choice for cloud and containerized environments.</p>
</blockquote>
<p><a href="https://etcd.io">etcd</a> is a core component of almost every Kubernetes installation and is responsible for storing the state of the cluster.</p>
<blockquote>
<p>A distributed, reliable key-value store for the most critical data of a distributed system</p>
</blockquote>
<p>In the case of etcd, there were <a href="https://github.com/etcd-io/etcd/pull/16801/files#diff-b8f5f4d0db4fb959d72d74463e2fd2637feb69f6b9e1dce61ad47ee031806dbd">two servers being maintained by five individual maintainers</a>, all of that work goes away by adopting actuated.</p>
<p>We even sent etcd <a href="https://github.com/etcd-io/etcd/pull/16801">a minimal Pull Request</a> to make the process smoother.</p>
<p><a href="https://github.com/jmhbnz">James Blair, Specialist Solution Architect at Red Hat</a>, commented:</p>
<blockquote>
<p>I believe managed on demand arm64 CI hosts will definitely be a big win for the project. Keen to trial this.</p>
</blockquote>
<p>Another maintainer also commented that they will <a href="https://github.com/etcd-io/etcd/pull/16801#issuecomment-1774024719">no longer need to worry about "leaky containers"</a>.</p>
<p><a href="https://github.com/etcd-io/etcd/actions/runs/6635037153"><img src="/images/2023-10-cncf/etcd-nightly.png" alt="One of the first nightly jobs running within an isolated Firecracker VM"></a></p>
<blockquote>
<p>One of the first nightly workflows running within 4x separate isolated Firecracker VMs, one per job</p>
</blockquote>
<p>Prior to adopting actuated, the two servers were only configured to run one job at a time, afterwards, the jobs are scheduled by the control-plane, according to the amount of available RAM and CPU in the target servers.</p>
<h2 id="how-do-we-get-access">How do we get access?</h2>
<p>If you are working on a CNCF project and would like access, <a href="https://docs.google.com/forms/d/e/1FAIpQLScA12IGyVFrZtSAp2Oj24OdaSMloqARSwoxx3AZbQbs0wpGww/viewform">please contact us via this form</a>. If your project gets selected for the pilot, there are a couple of things you may need to do.</p>
<ol>
<li>If you are already using the GitHub Actions runner hosted on Equinix, then change the <code>runs-on: self-hosted</code> label to: <code>runs-on: actuated-arm64-8cpu-16gb</code>. Then after you've seen a build or two pass, delete the old runner.</li>
<li>If you are using QEMU, the best next step is to "split" the build into two jobs which can run on <code>x86_64</code> and <code>arm64</code> natively, that's what Ellie did and it only took her a few minutes.</li>
</ol>
<p>The label for <code>runs-on:</code> allows for dynamic configuration of vCPU and GBs of RAM, just edit the label to match your needs, for etcd, the team asked for 8vCPU and 32GB of RAM, so they used <code>runs-on: actuated-arm64-8cpu-32gb</code>.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I had to split the docker build so that the ARM half would build on ARM, and x86 on x86, and then a step to combine the two - overall this works out to be a very significant improvement<a href="https://t.co/69cIxjYRcW">https://t.co/69cIxjYRcW</a></p>&mdash; Ellie Huxtable (@ellie_huxtable) <a href="https://twitter.com/ellie_huxtable/status/1715266936592904446?ref_src=twsrc%5Etfw">October 20, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>We have full instructions for 2, in the following tutorial: <a href="https://actuated.dev/blog/how-to-run-multi-arch-builds-natively">How to split up multi-arch Docker builds to run natively</a>.</p>
<p><strong>Is there access for AMD64?</strong></p>
<p>This program is limited to CNCF projects and Arm CI only. That said, most actuated customers run AMD64 builds with us.</p>
<p>GitHub already provides access to AMD64 runners for free for open source projects, that should cover most OSS project's needs.</p>
<p>So why would you want dedicated AMD64 support from actuated? Firstly, our recommended provider makes builds up to 3x quicker, secondly, you can run on private repos if required, without accuring a large bill.</p>
<p><strong>What are all the combinations of CPU and RAM?</strong></p>
<p>We get this question very often, but have tried to be as clear as possible in this blog post and <a href="https://docs.actuated.dev/examples/custom-vm-size/">in the docs</a>. There are no set combinations. You can come up with what you need.</p>
<p>That helps us make best use of the hardware, you can even have just a couple of cores, and max out to 256GB of RAM, if that's what your build needs.</p>
<p><strong>What if the sponsored program is full?</strong></p>
<p>The program has been very popular and there is a limit to the budget and number of projects that Ampere and the CNCF agreed to pay for. If you contact us and we tell you the limit has been reached, then your employer could sponsor the subscription, and we'll give you a special discount - you could get started immediately. Or you'll need to contact <a href="https://www.linkedin.com/in/caniszczyk/">Chris Aniszczyk</a> and tell him why it would be of value to the OSS project you represent to have native Arm CI. If you get in touch with us, we can introduce you to him via email if needed.</p>
<h2 id="learn-more-about-actuated">Learn more about actuated</h2>
<p>We're initially offering access to managed Arm CI for CNCF projects, but if you're working for a company that is experiencing friction with CI, please reach out to us to talk <a href="https://docs.google.com/forms/d/e/1FAIpQLScA12IGyVFrZtSAp2Oj24OdaSMloqARSwoxx3AZbQbs0wpGww/viewform">using this form</a>.</p>
<p>Ampere who are co-sponsoring our service with the CNCF have their own announcement here: <a href="https://amperecomputing.com/blogs/ampere-computing-and-cncf-supporting-arm-native-ci-for-ncf-projects">Ampere Computing and CNCF Supporting Arm Native CI for CNCF Projects</a>.</p>
<ul>
<li>Read one of our <a href="https://actuated.dev/blog">recent blog posts</a></li>
<li>Learn more about <a href="https://docs.actuated.dev">actuated in the docs</a></li>
<li><a href="https://actuated.dev">Read what our customers are saying about our service</a></li>
</ul>
<blockquote>
<p>Did you know? <a href="https://actuated.dev/blog/secure-microvm-ci-gitlab">Actuated for GitLab CI is now in technical preview, watch a demo here</a>.</p>
</blockquote></div></div></main><footer class="bg-white"><div class="mx-auto max-w-7xl py-12 px-4 sm:px-6 md:flex md:items-center md:justify-between lg:px-8"><div class="flex justify-center space-x-6 md:order-2"><a class="text-gray-400 hover:text-gray-500" href="https://twitter.com/selfactuated"><span class="sr-only">Twitter</span><svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a><a class="text-gray-400 hover:text-gray-500" href="https://github.com/self-actuated"><span class="sr-only">GitHub</span><svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a><a class="text-gray-400 hover:text-gray-500" href="/rss.xml"><span class="sr-only">RSS</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"></path></svg></a></div><div class="mt-8 md:order-1 md:mt-0"><p class="text-center text-base text-gray-400">¬© 2024 <a href="https://openfaas.com">OpenFaaS Ltd</a>. All rights reserved. <a class="hover:underline" href="/terms">Terms &amp; Conditions.</a></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"arm-ci-cncf-ampere","fileName":"2023-10-25-arm-ci-cncf-ampere.md","contentHtml":"\u003cp\u003eIn this post, we'll cover why \u003ca href=\"https://amperecomputing.com/\"\u003eAmpere Computing\u003c/a\u003e and \u003ca href=\"https://www.cncf.io/\"\u003eThe Cloud Native Computing Foundation (CNCF)\u003c/a\u003e are sponsoring a pilot of actuated for open source projects, how you can get involved.\u003c/p\u003e\n\u003cp\u003eWe'll also give you a quick one year recap on actuated, if you haven't checked in with us for a while.\u003c/p\u003e\n\u003ch2 id=\"managed-arm-ci-for-cncf-projects\"\u003eManaged Arm CI for CNCF projects\u003c/h2\u003e\n\u003cp\u003eAt KubeCon EU, I spoke to \u003ca href=\"https://www.linkedin.com/in/caniszczyk/\"\u003eChris Aniszczyk\u003c/a\u003e, CTO at the \u003ca href=\"https://cncf.io\"\u003eCloud Native Computing Foundation (CNCF)\u003c/a\u003e, and told him about some of the results we'd been seeing with actuated customers, including Fluent Bit, which is a CNCF project. Chris told me that many teams were either putting off Arm support all together, were suffering with the slow builds that come from using QEMU, or were managing their own infrastructure which was underutilized.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://deploy.equinix.com/\"\u003eEquinix\u003c/a\u003e provides a generous amount of credits to the CNCF under \u003ca href=\"https://github.com/cncf/cluster\"\u003eCNCF Community Infrastructure Lab (CIL)\u003c/a\u003e, including access to powerful Ampere Q80 Arm servers (\u003ca href=\"https://deploy.equinix.com/product/servers/c3-large-arm64/\"\u003ec3.large.arm64\u003c/a\u003e), that may at times be required by Equinix customers for their own Arm workloads.\u003c/p\u003e\n\u003cp\u003eYou can find out more about \u003ca href=\"https://amperecomputing.com/products/processors\"\u003eAmpere's Altra platform here\u003c/a\u003e, which is being branded as a \"Cloud Native\" CPU, due to its low power consumption, high core count, and ubiquitous availability across Google Cloud, Oracle Cloud Platform, Azure, Equinix Metal, Hetzner Cloud, and Alibaba Cloud.\u003c/p\u003e\n\u003cp\u003eAs you can imagine, over time, different projects have deployed 1-3 of their own runner servers, each with 256GB of RAM and 80 Cores, which remain idle most of the time, and are not available to other projects or Equinix customers when they may need them suddenly. So, if actuated can reduce this number, whilst also improving the experience for maintainers, then that's a win-win.\u003c/p\u003e\n\u003cp\u003eAround the same time as speaking to Chris, Ampere reached out and asked how they could help secure actuated for a number of CNCF projects.\u003c/p\u003e\n\u003cp\u003eTogether, Ampere and the CNCF are now sponsoring an initial 1-year pilot of managed Arm CI provided by actuated, for CNCF projects, with the view to expand it, if the pilot is a success.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.linkedin.com/in/edwardvielmetti/\"\u003eEd Vielmetti\u003c/a\u003e, Developer Partner Manager at Equinix said:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI'm really happy to see this all come together. If all goes according to plan, we'll have better runner isolation, faster builds, and a smaller overall machine footprint.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.linkedin.com/in/dneary/\"\u003eDave Neary\u003c/a\u003e, Director of Developer Relations at Ampere Computing added:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eActuated offers a faster, more secure way for projects to run 64-bit Arm builds, and will also more efficiently use the Ampere Altra-based servers being used by the projects.\u003c/p\u003e\n\u003cp\u003eWe're happy to support CNCF projects running their CI on Ampere Computing's Cloud Native Processors, hosted by Equinix.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"one-year-recap-on-actuated\"\u003eOne year recap on actuated\u003c/h2\u003e\n\u003cp\u003eIn case you are hearing about actuated for the first time, I wanted to give you a quick one year recap.\u003c/p\u003e\n\u003cp\u003eJust over 12 months ago, we \u003ca href=\"https://actuated.dev/blog/blazing-fast-ci-with-microvms\"\u003eannounced the work we'd been doing with actuated\u003c/a\u003e to improve self-hosted runner security and management. We were pleasantly surprised with the amount of people that responded who'd had a common experience with slow builds, running out of RAM, limited disk space, and a lack of an easy and secure way to run self-hosted runners.\u003c/p\u003e\n\u003cp\u003eFast forward to today, and we have run over 140,000 individual Firecracker VMs for customers on their own hardware. Rather than the fully managed service that GitHub offers, we believe that you should be able to bring your own hardware, and pay a flat-rate fee for the service, rather than being charged per-minute.\u003c/p\u003e\n\u003cp\u003eThe CNCF project brings about 64-bit Arm support, but we see a good mix of \u003ccode\u003ex86_64\u003c/code\u003e and Arm builds from customers, with both closed and open-source repositories being used.\u003c/p\u003e\n\u003cp\u003eThe main benefits are having access to bigger, faster and more specialist hardware.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFor \u003ccode\u003ex86_64\u003c/code\u003e builds, we see about a 3x speed-up vs. using GitHub's hosted runners, in addition to being able to add more RAM and disk space to builds.\u003c/li\u003e\n\u003cli\u003eFor Arm64, we see builds which take several hours or which fail to complete within a 6 hour window using QEMU, go down to 3-5 minutes.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eVendors and consumers are becoming increasingly aware of the importance of the supply chain, GitHub's self-hosted runner is \u003ca href=\"https://actuated.dev/blog/is-the-self-hosted-runner-safe-github-actions\"\u003enot recommended for open source repos\u003c/a\u003e. Why? Due to the way side-effects can be left over between builds. Actuated uses a fresh, immutable, Firecracker VM for every build which boots up in less than 1 second and is destroyed after the build completes, which removes this risk.\u003c/p\u003e\n\u003cp\u003eIf you're wanting to know more about why we think microVMs are the only tool that makes sense for secure CI, then I'd recommend my talk from Cloud Native Rejekts earlier in the year: \u003ca href=\"https://www.youtube.com/watch?v=pTQ_jVYhAoc\"\u003eFace off: VMs vs. Containers vs Firecracker\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"what-are-maintainers-saying\"\u003eWhat are maintainers saying?\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.linkedin.com/in/ellmh\"\u003eEllie Huxtable\u003c/a\u003e is the maintainer of \u003ca href=\"https://atuin.sh/\"\u003eAtuin\u003c/a\u003e, a popular open-source tool to sync, search and backup shell history. Her Rust build for the CLI took 90 minutes with QEMU, but was reduced to just 3 minutes with actuated, and a native Arm server.\u003c/p\u003e\n\u003cblockquote class=\"twitter-tweet\"\u003e\u003cp lang=\"en\" dir=\"ltr\"\u003eThanks to \u003ca href=\"https://twitter.com/selfactuated?ref_src=twsrc%5Etfw\"\u003e@selfactuated\u003c/a\u003e, Atuin now has very speedy ARM docker builds in our GitHub actions! Thank you \u003ca href=\"https://twitter.com/alexellisuk?ref_src=twsrc%5Etfw\"\u003e@alexellisuk\u003c/a\u003e üôè\u003cbr\u003e\u003cbr\u003eDocker builds on QEMU: nearly 90 mins\u003cbr\u003eDocker builds on ARM with Actuated: ~3 mins\u003c/p\u003e\u0026mdash; Ellie Huxtable (@ellie_huxtable) \u003ca href=\"https://twitter.com/ellie_huxtable/status/1715261549172936776?ref_src=twsrc%5Etfw\"\u003eOctober 20, 2023\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cp\u003eFor Fluent Bit, one of their Arm builds was taking over 6 hours, which meant it always failed with a timed-out on a hosted runner. \u003ca href=\"https://www.linkedin.com/in/patrickjkstephens/?originalSubdomain=uk\"\u003ePatrick Stephens\u003c/a\u003e, Tech Lead of Infrastructure at Calyptia reached out to work with us. We got the time down to 5 minutes by changing \u003ccode\u003eruns-on: ubuntu-latest\u003c/code\u003e to \u003ccode\u003eruns-on: actuated-arm64-4cpu-16gb\u003c/code\u003e, and if you need more or less RAM/CPU, you can tune those numbers as you wish.\u003c/p\u003e\n\u003cp\u003ePatrick shares about the experience on the Calyptia blog, including the benefits to their \u003ccode\u003ex86_64\u003c/code\u003e builds for the commercial Calyptia product: \u003ca href=\"https://calyptia.com/blog/scaling-builds-with-actuated\"\u003eScaling ARM builds with Actuated\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eA number of CNCF maintainers and community leaders such as \u003ca href=\"https://www.linkedin.com/in/davanum/\"\u003eDavanum Srinivas (Dims)\u003c/a\u003e, Principal Engineer at AWS have come forward with project suggestions, and we're starting to work through them, with the first two being Fluent Bit and etcd.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://fluentbit.io/\"\u003eFluent Bit\u003c/a\u003e describes itself as:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e..a super fast, lightweight, and highly scalable logging and metrics processor and forwarder. It is the preferred choice for cloud and containerized environments.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://etcd.io\"\u003eetcd\u003c/a\u003e is a core component of almost every Kubernetes installation and is responsible for storing the state of the cluster.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA distributed, reliable key-value store for the most critical data of a distributed system\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIn the case of etcd, there were \u003ca href=\"https://github.com/etcd-io/etcd/pull/16801/files#diff-b8f5f4d0db4fb959d72d74463e2fd2637feb69f6b9e1dce61ad47ee031806dbd\"\u003etwo servers being maintained by five individual maintainers\u003c/a\u003e, all of that work goes away by adopting actuated.\u003c/p\u003e\n\u003cp\u003eWe even sent etcd \u003ca href=\"https://github.com/etcd-io/etcd/pull/16801\"\u003ea minimal Pull Request\u003c/a\u003e to make the process smoother.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/jmhbnz\"\u003eJames Blair, Specialist Solution Architect at Red Hat\u003c/a\u003e, commented:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI believe managed on demand arm64 CI hosts will definitely be a big win for the project. Keen to trial this.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAnother maintainer also commented that they will \u003ca href=\"https://github.com/etcd-io/etcd/pull/16801#issuecomment-1774024719\"\u003eno longer need to worry about \"leaky containers\"\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/etcd-io/etcd/actions/runs/6635037153\"\u003e\u003cimg src=\"/images/2023-10-cncf/etcd-nightly.png\" alt=\"One of the first nightly jobs running within an isolated Firecracker VM\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOne of the first nightly workflows running within 4x separate isolated Firecracker VMs, one per job\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ePrior to adopting actuated, the two servers were only configured to run one job at a time, afterwards, the jobs are scheduled by the control-plane, according to the amount of available RAM and CPU in the target servers.\u003c/p\u003e\n\u003ch2 id=\"how-do-we-get-access\"\u003eHow do we get access?\u003c/h2\u003e\n\u003cp\u003eIf you are working on a CNCF project and would like access, \u003ca href=\"https://docs.google.com/forms/d/e/1FAIpQLScA12IGyVFrZtSAp2Oj24OdaSMloqARSwoxx3AZbQbs0wpGww/viewform\"\u003eplease contact us via this form\u003c/a\u003e. If your project gets selected for the pilot, there are a couple of things you may need to do.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIf you are already using the GitHub Actions runner hosted on Equinix, then change the \u003ccode\u003eruns-on: self-hosted\u003c/code\u003e label to: \u003ccode\u003eruns-on: actuated-arm64-8cpu-16gb\u003c/code\u003e. Then after you've seen a build or two pass, delete the old runner.\u003c/li\u003e\n\u003cli\u003eIf you are using QEMU, the best next step is to \"split\" the build into two jobs which can run on \u003ccode\u003ex86_64\u003c/code\u003e and \u003ccode\u003earm64\u003c/code\u003e natively, that's what Ellie did and it only took her a few minutes.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe label for \u003ccode\u003eruns-on:\u003c/code\u003e allows for dynamic configuration of vCPU and GBs of RAM, just edit the label to match your needs, for etcd, the team asked for 8vCPU and 32GB of RAM, so they used \u003ccode\u003eruns-on: actuated-arm64-8cpu-32gb\u003c/code\u003e.\u003c/p\u003e\n\u003cblockquote class=\"twitter-tweet\"\u003e\u003cp lang=\"en\" dir=\"ltr\"\u003eI had to split the docker build so that the ARM half would build on ARM, and x86 on x86, and then a step to combine the two - overall this works out to be a very significant improvement\u003ca href=\"https://t.co/69cIxjYRcW\"\u003ehttps://t.co/69cIxjYRcW\u003c/a\u003e\u003c/p\u003e\u0026mdash; Ellie Huxtable (@ellie_huxtable) \u003ca href=\"https://twitter.com/ellie_huxtable/status/1715266936592904446?ref_src=twsrc%5Etfw\"\u003eOctober 20, 2023\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cp\u003eWe have full instructions for 2, in the following tutorial: \u003ca href=\"https://actuated.dev/blog/how-to-run-multi-arch-builds-natively\"\u003eHow to split up multi-arch Docker builds to run natively\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eIs there access for AMD64?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eThis program is limited to CNCF projects and Arm CI only. That said, most actuated customers run AMD64 builds with us.\u003c/p\u003e\n\u003cp\u003eGitHub already provides access to AMD64 runners for free for open source projects, that should cover most OSS project's needs.\u003c/p\u003e\n\u003cp\u003eSo why would you want dedicated AMD64 support from actuated? Firstly, our recommended provider makes builds up to 3x quicker, secondly, you can run on private repos if required, without accuring a large bill.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWhat are all the combinations of CPU and RAM?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eWe get this question very often, but have tried to be as clear as possible in this blog post and \u003ca href=\"https://docs.actuated.dev/examples/custom-vm-size/\"\u003ein the docs\u003c/a\u003e. There are no set combinations. You can come up with what you need.\u003c/p\u003e\n\u003cp\u003eThat helps us make best use of the hardware, you can even have just a couple of cores, and max out to 256GB of RAM, if that's what your build needs.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWhat if the sponsored program is full?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eThe program has been very popular and there is a limit to the budget and number of projects that Ampere and the CNCF agreed to pay for. If you contact us and we tell you the limit has been reached, then your employer could sponsor the subscription, and we'll give you a special discount - you could get started immediately. Or you'll need to contact \u003ca href=\"https://www.linkedin.com/in/caniszczyk/\"\u003eChris Aniszczyk\u003c/a\u003e and tell him why it would be of value to the OSS project you represent to have native Arm CI. If you get in touch with us, we can introduce you to him via email if needed.\u003c/p\u003e\n\u003ch2 id=\"learn-more-about-actuated\"\u003eLearn more about actuated\u003c/h2\u003e\n\u003cp\u003eWe're initially offering access to managed Arm CI for CNCF projects, but if you're working for a company that is experiencing friction with CI, please reach out to us to talk \u003ca href=\"https://docs.google.com/forms/d/e/1FAIpQLScA12IGyVFrZtSAp2Oj24OdaSMloqARSwoxx3AZbQbs0wpGww/viewform\"\u003eusing this form\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eAmpere who are co-sponsoring our service with the CNCF have their own announcement here: \u003ca href=\"https://amperecomputing.com/blogs/ampere-computing-and-cncf-supporting-arm-native-ci-for-ncf-projects\"\u003eAmpere Computing and CNCF Supporting Arm Native CI for CNCF Projects\u003c/a\u003e.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRead one of our \u003ca href=\"https://actuated.dev/blog\"\u003erecent blog posts\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eLearn more about \u003ca href=\"https://docs.actuated.dev\"\u003eactuated in the docs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://actuated.dev\"\u003eRead what our customers are saying about our service\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDid you know? \u003ca href=\"https://actuated.dev/blog/secure-microvm-ci-gitlab\"\u003eActuated for GitLab CI is now in technical preview, watch a demo here\u003c/a\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e","title":"Announcing managed Arm CI for CNCF projects","description":"Ampere Computing and The Cloud Native Computing Foundation are sponsoring a pilot of actuated's managed Arm CI for CNCF projects.","tags":["cloudnative","arm","opensource"],"author_img":"alex","image":"/images/2023-10-cncf/background.png","date":"2023-10-25"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"arm-ci-cncf-ampere"},"buildId":"TZlPezVIkryNxUuitvxw1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>