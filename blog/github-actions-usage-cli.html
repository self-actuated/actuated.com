<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="author" content="OpenFaaS Ltd"/><meta name="twitter:card" content="summary_large_image"/><title>Understand your usage of GitHub Actions</title><meta name="description" content="Learn how you or your team is using GitHub Actions across your personal account or organisation."/><meta property="twitter:title" content="Understand your usage of GitHub Actions"/><meta property="twitter:description" content="Learn how you or your team is using GitHub Actions across your personal account or organisation."/><meta property="og:title" content="Understand your usage of GitHub Actions"/><meta property="og:description" content="Learn how you or your team is using GitHub Actions across your personal account or organisation."/><meta name="twitter:image:src" content="https://actuated.dev/images/2023-06-actions-usage/background.png"/><meta property="og:image" content="https://actuated.dev/images/2023-06-actions-usage/background.png"/><meta name="next-head-count" content="13"/><meta charSet="utf-8"/><link rel="icon" type="image/png" href="/images/actuated.png"/><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"/><link rel="manifest" href="/manifest.json"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M5YNDNX7VT"></script><script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-M5YNDNX7VT');
          </script><link rel="apple-touch-icon" href="/images/actuated.png"/><link rel="preload" href="/_next/static/css/931f0fc3815fa31d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/931f0fc3815fa31d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-34e2100d07ae5757.js" defer=""></script><script src="/_next/static/chunks/pages/_app-380bfc772a8344bc.js" defer=""></script><script src="/_next/static/chunks/552-542f150c917a7625.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-109b0d2eddac75b5.js" defer=""></script><script src="/_next/static/H2d_6V2DVBqgqO-cU8IAM/_buildManifest.js" defer=""></script><script src="/_next/static/H2d_6V2DVBqgqO-cU8IAM/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="bg-white"><header><div class="relative bg-white" data-headlessui-state=""><div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-6 sm:px-6 md:justify-start md:space-x-10 lg:px-8"><div class="flex justify-start lg:w-0 lg:flex-1"><a href="/"><span class="sr-only">Actuated</span><img class="h-8 w-auto sm:h-10" src="/images/actuated.png" alt="Actuated logo"/></a></div><div class="-my-2 -mr-2 md:hidden"><button class="inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" type="button" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Open menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div><nav class="hidden space-x-10 md:flex"><div class="relative" data-headlessui-state=""><button class="text-gray-500 group inline-flex items-center rounded-md bg-white text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" type="button" aria-expanded="false" data-headlessui-state=""><span>Solutions</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path></svg></button></div><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/blog">Blog</a><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="https://actuated.dev/blog/blazing-fast-ci-with-microvms">Announcement</a><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/pricing">Pricing</a><a class="text-base font-medium text-gray-500 hover:text-gray-900" href="https://docs.actuated.dev/">Docs</a></nav><div class="hidden items-center justify-end md:flex md:flex-1 lg:w-0"><a href="https://dashboard.actuated.dev" class="whitespace-nowrap text-base font-medium text-gray-500 hover:text-gray-900">Sign in</a><a href="/pricing" class="ml-8 inline-flex items-center justify-center whitespace-nowrap rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700">Sign-up</a></div></div></div></header><main><div class="container mx-auto max-w-4xl bg-white mt-4 px-4 sm:px-6"><h1 id="post_title" class="text-3xl mb-3 leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 text-center">Understand your usage of GitHub Actions</h1></div><div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl"><div class="border-b border-gray-200 py-4 flex items-center text-gray-500 mx-auto"><div><img class="h-10 w-10 rounded-full" src="/images/alex.jpg" alt=""/></div><div class="ml-3"><p id="post_author" class="text-sm leading-5 font-medium text-gray-900"></p><div class="flex text-sm leading-5 text-gray-500"><time dateTime="2023-06-16" id="post_date">June 16, 2023</time><span class="mx-1"></span></div></div></div><div class="mt-6 prose sm:prose-lg max-w-none"><p id="post_description" class="mb-4">Learn how you or your team is using GitHub Actions across your personal account or organisation.</p></div><div id="post_content" class="mt-6 prose sm:prose-lg max-w-none"><p>Whenever GitHub Actions users get in touch with us to ask about actuated, we ask them a number of questions. What do you build? What pain points have you been running into? What are you currently spending? And then - how many minutes are you using?</p>
<p>That final question is a hard one for many to answer because the GitHub UI and API will only show billable minutes. Why is that a problem? Some teams only use open-source repositories with free runners. Others may have a large free allowance of credit for one reason or another and so also don't really know what they're using. Then you have people who already use some form of self-hosted runners - they are also excluded from what GitHub shows you.</p>
<p>So we built an Open Source CLI tool called <a href="https://github.com/self-actuated/actions-usage">actions-usage</a> to generate a report of your total minutes by querying GitHub's REST API.</p>
<p>And over time, we had requests to break-down per day - so for our customers in the Middle East like <a href="https://kubiya.ai/">Kubiya</a>, it's common to see a very busy day on Sunday, and not a lot of action on Friday. Given that some teams use mono-repos, we also added the ability to break-down per repository - so you can see which ones are the most active. And finally, we added the ability to see hot-spots of usage like the longest running repo or the most active day.</p>
<p>You can run the tool in three ways:</p>
<ul>
<li>Against an organisation</li>
<li>Against a personal user account</li>
<li>Or in a GitHub Action</li>
</ul>
<p>I'll show you each briefly, but the one I like the most is the third option because it's kind of recursive.</p>
<p>Before we get started, download <a href="https://arkade.dev">arkade</a>, and use it to install the tool:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Move the binary yourself into $PATH</span>
curl -sLS https://get.arkade.dev | sh

<span class="hljs-comment"># Have sudo move it for you</span>
curl -sLS https://get.arkade.dev | sudo sh
arkade install actions-usage
</code></pre>
<p>Or if you prefer - you can add my <a href="https://github.com/alexellis/homebrew-alexellis">brew tap</a>, or head over to the <a href="https://github.com/alexellis/arkade/releases">arkade releases page</a>.</p>
<p>Later on, I'll also show you how to use the <code>alexellis/arkade-get</code> action to install the tool for CI.</p>
<h2 id="finding-out-about-your-organisation">Finding out about your organisation</h2>
<p>If you want to find out about your organisation, you can run the tool like this:</p>
<pre><code class="hljs language-bash">actions-usage \
    -org <span class="hljs-variable">$GITHUB_REPOSITORY_OWNER</span> \
    -days 28 \
    -by-repo \
    -punch-card \
    -token-file ~/PAT.txt
</code></pre>
<p>You'll need a Personal Access Token, there are instructions on how to create this in the <a href="https://github.com/self-actuated/actions-usage">actions-usage README file</a></p>
<p>There are many log lines printed to stderr during the scan of repositories and the workflows. You can omit all of this by adding <code>2> /dev/null </code> to the command.</p>
<p>First off we show the totals:</p>
<pre><code>Fetching last 28 days of data (created>=2023-05-19)

Generated by: https://github.com/self-actuated/actions-usage
Report for actuated-samples - last: 28 days.

Total repos: 24
Total private repos: 0
Total public repos: 24

Total workflow runs: 107
Total workflow jobs: 488

Total users: 1
</code></pre>
<p>Then break down on success/failure and cancelled jobs overall, plus the biggest and average build time:</p>
<pre><code>Success: 369/488
Failure: 45/488
Cancelled: 73/488

Longest build: 29m32s
Average build time: 1m26s
</code></pre>
<p>Next we have the day by day breakdown. You can see that we try to focus on our families on Sunday at OpenFaaS Ltd, instead of working:</p>
<pre><code>Day            Builds
Monday         61
Tuesday        50
Wednesday      103
Thursday       110
Friday         153
Saturday       10
Sunday         0
Total          488
</code></pre>
<p>Our customers in the Middle East work to a different week, and so you'd see Saturday with no builds or nothing, and Sunday like a normal working day.</p>
<p>Then we have the repo-by-repo breakdown with some much more granular data:</p>
<pre><code>Repo                                      Builds         Success        Failure        Cancelled      Skipped        Total          Average        Longest
actuated-samples/k3sup-matrix-test        355            273            20             62             0              2h59m1s        30s            1m29s
actuated-samples/discourse                49             38             7              4              0              6h37m21s       8m7s           20m1s
actuated-samples/specs                    35             31             1              3              0              10m20s         18s            32s
actuated-samples/cypress-test             17             4              13             0              0              6m23s          23s            49s
actuated-samples/cilium-test              9              4              2              3              0              1h10m41s       7m51s          29m32s
actuated-samples/kernel-builder-linux-6.0 9              9              0              0              0              11m28s         1m16s          1m27s
actuated-samples/actions-usage-job        8              4              2              1              0              46s            6s             11s
actuated-samples/faasd-nix                6              6              0              0              0              24m20s         4m3s           10m49s
</code></pre>
<p>Finally, we have the original value that the tool set out to display:</p>
<pre><code>Total usage: 11h40m20s (700 mins)
</code></pre>
<p>We display the value in a Go duration for readability and in minutes because that's the number that GitHub uses to talk about usage.</p>
<p>One customer told us that they were running into rate limits when querying for 28 days of data, so they dropped down to 14 days and then multiplied the result by two to get a rough estimate.</p>
<pre><code>-days 14 
</code></pre>
<p>The team at Todoist got in touch with us to see if actuated could reduce their bill on GitHub Actions. When he tried to run the tool the rate-limit was exhausted even when he changed the flag to <code>-days 1</code>. Why? They were using 550,000 minutes!</p>
<p>So we can see one of the limitations already of this approach. Fortunately, actuated customers have their job stats recorded in a database and can generate reports <a href="https://docs.actuated.dev/dashboard/">from the dashboard very quickly</a>.</p>
<h2 id="finding-out-about-your-personal-account">Finding out about your personal account</h2>
<p>Actuated isn't built for personal users, but for teams, so we didn't add this feature initially. Then we saw a few people reach out via Twitter and GitHub and decided to add it for them.</p>
<p>For your personal account, you only have to change one of the input parameters:</p>
<pre><code class="hljs language-bash">actions-usage \
    -user alexellis \
    -days 28 \
    -by-repo \
    -punch-card \
    -token-file ~/ae-pat.txt 2> /dev/null 
</code></pre>
<p>Now I actually have > 250 repositories and most of them don't even have Actions enabled, so this makes the tool less useful for me personally. So it was great when a community member suggested offering a way to filter repos when you have so many that the tool takes a long time to run or can't complete due to rate-limits.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Being that today I used it to get the same insights from a Github Org where I currently work, which contains 1.4k of repositories.<br><br>And this was running for a considerable time. I am only related to only a few repositories within this organization.</p>&mdash; lbrealdeveloper (@lbrealdeveloper) <a href="https://twitter.com/lbrealdeveloper/status/1669401439431544832?ref_src=twsrc%5Etfw">June 15, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>I've already created an issue and have found someone who'd like to contribute the change: <a href="https://github.com/self-actuated/actions-usage/issues/8">Offer a way to filter repos for large organisations / users #8</a></p>
<p>This is the beauty of open source and community. We all get to benefit from each other's ideas and contributions.</p>
<h2 id="running-actions-usage-with-a-github-action">Running actions-usage with a GitHub Action</h2>
<p>Now this is my favourite way to run the tool. I can run it on a schedule and get a report sent to me via email or Slack.</p>
<p><img src="/images/2023-06-actions-usage/summary.png" alt="Example output from running the tool as a GitHub Action"></p>
<blockquote>
<p>Example output from running the tool as a GitHub Action</p>
</blockquote>
<p>Create <code>actions-usage.yaml</code> in your <code>.github/workflows</code> folder:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">actions-usage</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>
  <span class="hljs-attr">workflow_dispatch:</span>

<span class="hljs-attr">permissions:</span>
  <span class="hljs-attr">actions:</span> <span class="hljs-string">read</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">actions-usage:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">daily-stats</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">actuated-any-1cpu-2gb</span>
    <span class="hljs-attr">steps:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">alexellis/arkade-get@master</span>
      <span class="hljs-attr">with:</span>
        <span class="hljs-attr">actions-usage:</span> <span class="hljs-string">latest</span>
        <span class="hljs-attr">print-summary:</span> <span class="hljs-literal">false</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Generate</span> <span class="hljs-string">actions-usage</span> <span class="hljs-string">report</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">|
       echo "### Actions Usage report by [actuated.dev](https://actuated.dev)" >> SUMMARY
       echo "\`\`\`" >> SUMMARY
       actions-usage \
        -org $GITHUB_REPOSITORY_OWNER \
        -days 1 \
        -by-repo \
        -punch-card \
        -token ${{ secrets.GITHUB_TOKEN }}  2> /dev/null  >> SUMMARY
       echo "\`\`\`" >> SUMMARY
       cat SUMMARY >> $GITHUB_STEP_SUMMARY
</span></code></pre>
<p>Ths is designed to run within an organisation, but you can change the <code>-org</code> flag to <code>-user</code> and then use your own username.</p>
<p>The days are for the past day of activity, but you can change this to any number like 7, 14 or 28 days.</p>
<p>You can learn about the other flags by running <code>actions-usage --help</code> on your own machine.</p>
<h2 id="wrapping-up">Wrapping up</h2>
<p>actions-usage is a practical tool that we use with customers to get an idea of their usage and how we can help with actuated. That said, it's also a completely free and open source tool for which the community is finding their own set of use-cases.</p>
<p>And there are no worries about privacy, we've gone very low tech here. The output is only printed to the console, and we never receive any of your data unless you specifically copy and paste the output into an email.</p>
<p>Feel free to create an issue if you have a feature request or a question.</p>
<p>Check out <a href="https://github.com/self-actuated/actions-usage">self-actuated/actions-usage</a> on GitHub</p>
<p>I wrote an eBook writing CLIs like this in Go and keep it up to date on a regular basis - adding new examples and features of Go.</p>
<p>Why not check out what people are saying about it on <a href="https://store.openfaas.com/l/everyday-golang">Gumroad</a>?</p>
<p><a href="https://store.openfaas.com/l/everyday-golang">Everyday Go - The Fast Track</a></p></div></div></main><footer class="bg-white"><div class="mx-auto max-w-7xl py-12 px-4 sm:px-6 md:flex md:items-center md:justify-between lg:px-8"><div class="flex justify-center space-x-6 md:order-2"><a class="text-gray-400 hover:text-gray-500" href="https://twitter.com/selfactuated"><span class="sr-only">Twitter</span><svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a><a class="text-gray-400 hover:text-gray-500" href="https://github.com/self-actuated"><span class="sr-only">GitHub</span><svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a><a class="text-gray-400 hover:text-gray-500" href="/rss.xml"><span class="sr-only">RSS</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"></path></svg></a></div><div class="mt-8 md:order-1 md:mt-0"><p class="text-center text-base text-gray-400">© 2024 <a href="https://openfaas.com">OpenFaaS Ltd</a>. All rights reserved. <a class="hover:underline" href="/terms">Terms &amp; Conditions.</a></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"github-actions-usage-cli","fileName":"2023-06-16-github-actions-usage-cli.md","contentHtml":"\u003cp\u003eWhenever GitHub Actions users get in touch with us to ask about actuated, we ask them a number of questions. What do you build? What pain points have you been running into? What are you currently spending? And then - how many minutes are you using?\u003c/p\u003e\n\u003cp\u003eThat final question is a hard one for many to answer because the GitHub UI and API will only show billable minutes. Why is that a problem? Some teams only use open-source repositories with free runners. Others may have a large free allowance of credit for one reason or another and so also don't really know what they're using. Then you have people who already use some form of self-hosted runners - they are also excluded from what GitHub shows you.\u003c/p\u003e\n\u003cp\u003eSo we built an Open Source CLI tool called \u003ca href=\"https://github.com/self-actuated/actions-usage\"\u003eactions-usage\u003c/a\u003e to generate a report of your total minutes by querying GitHub's REST API.\u003c/p\u003e\n\u003cp\u003eAnd over time, we had requests to break-down per day - so for our customers in the Middle East like \u003ca href=\"https://kubiya.ai/\"\u003eKubiya\u003c/a\u003e, it's common to see a very busy day on Sunday, and not a lot of action on Friday. Given that some teams use mono-repos, we also added the ability to break-down per repository - so you can see which ones are the most active. And finally, we added the ability to see hot-spots of usage like the longest running repo or the most active day.\u003c/p\u003e\n\u003cp\u003eYou can run the tool in three ways:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAgainst an organisation\u003c/li\u003e\n\u003cli\u003eAgainst a personal user account\u003c/li\u003e\n\u003cli\u003eOr in a GitHub Action\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI'll show you each briefly, but the one I like the most is the third option because it's kind of recursive.\u003c/p\u003e\n\u003cp\u003eBefore we get started, download \u003ca href=\"https://arkade.dev\"\u003earkade\u003c/a\u003e, and use it to install the tool:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Move the binary yourself into $PATH\u003c/span\u003e\ncurl -sLS https://get.arkade.dev | sh\n\n\u003cspan class=\"hljs-comment\"\u003e# Have sudo move it for you\u003c/span\u003e\ncurl -sLS https://get.arkade.dev | sudo sh\narkade install actions-usage\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr if you prefer - you can add my \u003ca href=\"https://github.com/alexellis/homebrew-alexellis\"\u003ebrew tap\u003c/a\u003e, or head over to the \u003ca href=\"https://github.com/alexellis/arkade/releases\"\u003earkade releases page\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eLater on, I'll also show you how to use the \u003ccode\u003ealexellis/arkade-get\u003c/code\u003e action to install the tool for CI.\u003c/p\u003e\n\u003ch2 id=\"finding-out-about-your-organisation\"\u003eFinding out about your organisation\u003c/h2\u003e\n\u003cp\u003eIf you want to find out about your organisation, you can run the tool like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eactions-usage \\\n    -org \u003cspan class=\"hljs-variable\"\u003e$GITHUB_REPOSITORY_OWNER\u003c/span\u003e \\\n    -days 28 \\\n    -by-repo \\\n    -punch-card \\\n    -token-file ~/PAT.txt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou'll need a Personal Access Token, there are instructions on how to create this in the \u003ca href=\"https://github.com/self-actuated/actions-usage\"\u003eactions-usage README file\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThere are many log lines printed to stderr during the scan of repositories and the workflows. You can omit all of this by adding \u003ccode\u003e2\u003e /dev/null \u003c/code\u003e to the command.\u003c/p\u003e\n\u003cp\u003eFirst off we show the totals:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eFetching last 28 days of data (created\u003e=2023-05-19)\n\nGenerated by: https://github.com/self-actuated/actions-usage\nReport for actuated-samples - last: 28 days.\n\nTotal repos: 24\nTotal private repos: 0\nTotal public repos: 24\n\nTotal workflow runs: 107\nTotal workflow jobs: 488\n\nTotal users: 1\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen break down on success/failure and cancelled jobs overall, plus the biggest and average build time:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eSuccess: 369/488\nFailure: 45/488\nCancelled: 73/488\n\nLongest build: 29m32s\nAverage build time: 1m26s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNext we have the day by day breakdown. You can see that we try to focus on our families on Sunday at OpenFaaS Ltd, instead of working:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eDay            Builds\nMonday         61\nTuesday        50\nWednesday      103\nThursday       110\nFriday         153\nSaturday       10\nSunday         0\nTotal          488\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOur customers in the Middle East work to a different week, and so you'd see Saturday with no builds or nothing, and Sunday like a normal working day.\u003c/p\u003e\n\u003cp\u003eThen we have the repo-by-repo breakdown with some much more granular data:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eRepo                                      Builds         Success        Failure        Cancelled      Skipped        Total          Average        Longest\nactuated-samples/k3sup-matrix-test        355            273            20             62             0              2h59m1s        30s            1m29s\nactuated-samples/discourse                49             38             7              4              0              6h37m21s       8m7s           20m1s\nactuated-samples/specs                    35             31             1              3              0              10m20s         18s            32s\nactuated-samples/cypress-test             17             4              13             0              0              6m23s          23s            49s\nactuated-samples/cilium-test              9              4              2              3              0              1h10m41s       7m51s          29m32s\nactuated-samples/kernel-builder-linux-6.0 9              9              0              0              0              11m28s         1m16s          1m27s\nactuated-samples/actions-usage-job        8              4              2              1              0              46s            6s             11s\nactuated-samples/faasd-nix                6              6              0              0              0              24m20s         4m3s           10m49s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFinally, we have the original value that the tool set out to display:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eTotal usage: 11h40m20s (700 mins)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe display the value in a Go duration for readability and in minutes because that's the number that GitHub uses to talk about usage.\u003c/p\u003e\n\u003cp\u003eOne customer told us that they were running into rate limits when querying for 28 days of data, so they dropped down to 14 days and then multiplied the result by two to get a rough estimate.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-days 14 \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe team at Todoist got in touch with us to see if actuated could reduce their bill on GitHub Actions. When he tried to run the tool the rate-limit was exhausted even when he changed the flag to \u003ccode\u003e-days 1\u003c/code\u003e. Why? They were using 550,000 minutes!\u003c/p\u003e\n\u003cp\u003eSo we can see one of the limitations already of this approach. Fortunately, actuated customers have their job stats recorded in a database and can generate reports \u003ca href=\"https://docs.actuated.dev/dashboard/\"\u003efrom the dashboard very quickly\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"finding-out-about-your-personal-account\"\u003eFinding out about your personal account\u003c/h2\u003e\n\u003cp\u003eActuated isn't built for personal users, but for teams, so we didn't add this feature initially. Then we saw a few people reach out via Twitter and GitHub and decided to add it for them.\u003c/p\u003e\n\u003cp\u003eFor your personal account, you only have to change one of the input parameters:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eactions-usage \\\n    -user alexellis \\\n    -days 28 \\\n    -by-repo \\\n    -punch-card \\\n    -token-file ~/ae-pat.txt 2\u003e /dev/null \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow I actually have \u003e 250 repositories and most of them don't even have Actions enabled, so this makes the tool less useful for me personally. So it was great when a community member suggested offering a way to filter repos when you have so many that the tool takes a long time to run or can't complete due to rate-limits.\u003c/p\u003e\n\u003cblockquote class=\"twitter-tweet\"\u003e\u003cp lang=\"en\" dir=\"ltr\"\u003eBeing that today I used it to get the same insights from a Github Org where I currently work, which contains 1.4k of repositories.\u003cbr\u003e\u003cbr\u003eAnd this was running for a considerable time. I am only related to only a few repositories within this organization.\u003c/p\u003e\u0026mdash; lbrealdeveloper (@lbrealdeveloper) \u003ca href=\"https://twitter.com/lbrealdeveloper/status/1669401439431544832?ref_src=twsrc%5Etfw\"\u003eJune 15, 2023\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cp\u003eI've already created an issue and have found someone who'd like to contribute the change: \u003ca href=\"https://github.com/self-actuated/actions-usage/issues/8\"\u003eOffer a way to filter repos for large organisations / users #8\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis is the beauty of open source and community. We all get to benefit from each other's ideas and contributions.\u003c/p\u003e\n\u003ch2 id=\"running-actions-usage-with-a-github-action\"\u003eRunning actions-usage with a GitHub Action\u003c/h2\u003e\n\u003cp\u003eNow this is my favourite way to run the tool. I can run it on a schedule and get a report sent to me via email or Slack.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/2023-06-actions-usage/summary.png\" alt=\"Example output from running the tool as a GitHub Action\"\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eExample output from running the tool as a GitHub Action\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eCreate \u003ccode\u003eactions-usage.yaml\u003c/code\u003e in your \u003ccode\u003e.github/workflows\u003c/code\u003e folder:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions-usage\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eon:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epush:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ebranches:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emaster\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emain\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eworkflow_dispatch:\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003epermissions:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eactions:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eread\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ejobs:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eactions-usage:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edaily-stats\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eruns-on:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactuated-any-1cpu-2gb\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003esteps:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ealexellis/arkade-get@master\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eactions-usage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003elatest\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eprint-summary:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eGenerate\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions-usage\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ereport\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n       echo \"### Actions Usage report by [actuated.dev](https://actuated.dev)\" \u003e\u003e SUMMARY\n       echo \"\\`\\`\\`\" \u003e\u003e SUMMARY\n       actions-usage \\\n        -org $GITHUB_REPOSITORY_OWNER \\\n        -days 1 \\\n        -by-repo \\\n        -punch-card \\\n        -token ${{ secrets.GITHUB_TOKEN }}  2\u003e /dev/null  \u003e\u003e SUMMARY\n       echo \"\\`\\`\\`\" \u003e\u003e SUMMARY\n       cat SUMMARY \u003e\u003e $GITHUB_STEP_SUMMARY\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThs is designed to run within an organisation, but you can change the \u003ccode\u003e-org\u003c/code\u003e flag to \u003ccode\u003e-user\u003c/code\u003e and then use your own username.\u003c/p\u003e\n\u003cp\u003eThe days are for the past day of activity, but you can change this to any number like 7, 14 or 28 days.\u003c/p\u003e\n\u003cp\u003eYou can learn about the other flags by running \u003ccode\u003eactions-usage --help\u003c/code\u003e on your own machine.\u003c/p\u003e\n\u003ch2 id=\"wrapping-up\"\u003eWrapping up\u003c/h2\u003e\n\u003cp\u003eactions-usage is a practical tool that we use with customers to get an idea of their usage and how we can help with actuated. That said, it's also a completely free and open source tool for which the community is finding their own set of use-cases.\u003c/p\u003e\n\u003cp\u003eAnd there are no worries about privacy, we've gone very low tech here. The output is only printed to the console, and we never receive any of your data unless you specifically copy and paste the output into an email.\u003c/p\u003e\n\u003cp\u003eFeel free to create an issue if you have a feature request or a question.\u003c/p\u003e\n\u003cp\u003eCheck out \u003ca href=\"https://github.com/self-actuated/actions-usage\"\u003eself-actuated/actions-usage\u003c/a\u003e on GitHub\u003c/p\u003e\n\u003cp\u003eI wrote an eBook writing CLIs like this in Go and keep it up to date on a regular basis - adding new examples and features of Go.\u003c/p\u003e\n\u003cp\u003eWhy not check out what people are saying about it on \u003ca href=\"https://store.openfaas.com/l/everyday-golang\"\u003eGumroad\u003c/a\u003e?\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://store.openfaas.com/l/everyday-golang\"\u003eEveryday Go - The Fast Track\u003c/a\u003e\u003c/p\u003e","title":"Understand your usage of GitHub Actions","description":"Learn how you or your team is using GitHub Actions across your personal account or organisation.","tags":["costoptimization","analytics","githubactions","opensource","golang","cli"],"author_img":"alex","date":"2023-06-16","image":"/images/2023-06-actions-usage/background.png"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"github-actions-usage-cli"},"buildId":"H2d_6V2DVBqgqO-cU8IAM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>